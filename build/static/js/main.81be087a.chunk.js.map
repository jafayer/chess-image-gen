{"version":3,"sources":["components/controls.jsx","components/messages.jsx","App.js","index.js"],"names":["Controls","state","saveToServer","body","pgn","props","chess","whiteColor","blackColor","darkMode","highlightLastMove","req","XMLHttpRequest","open","setRequestHeader","onload","readyState","status","response","JSON","parse","console","log","handleOtherChange","id","warn","send","stringify","className","cols","rows","placeholder","onChange","e","handlePGN","target","value","htmlFor","this","type","defaultChecked","checked","onClick","Component","Messages","copyToClipboard","window","navigator","clipboard","url","fetchedID","writeText","then","App","Chess","files","a","b","c","d","f","g","h","squareColors","normal","darkSquare","lightSquare","dark","componentDidMount","canvas","document","querySelector","ctx","getContext","square","width","lineWidth","lineCap","fillBoard","path","location","pathname","slice","fetchFromServer","fetch","res","json","setState","fetchedGame","load_pgn","updateBoard","catch","err","error","rank","file","fillStyle","fillRect","height","drawPath","from","to","color","beginPath","strokeStyle","moveTo","x","y","lineTo","stroke","clearRect","history","verbose","moves","forEach","move","fromTo","addTo","push","concat","i","fromFile","fromRank","parseInt","fromFileNum","fromCoords","toFile","toRank","toFileNum","toCoords","length","arc","Math","PI","h1","header","t","ceil","trim","innerHTML","White","Black","Result","Date","innerText","callback","message","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","style","transform","flipped","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.81be087a.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass Controls extends Component {\r\n    state = {  }\r\n    render() { \r\n        return (\r\n            <div className=\"controls\">\r\n                <textarea id=\"importGame\" cols=\"30\" rows=\"10\" placeholder=\"Input PGN\"\r\n                            onChange={(e) => {this.props.handlePGN(e.target.value)}}\r\n                        ></textarea>\r\n                <div className=\"row\">\r\n                    <label htmlFor=\"whiteColor\">\r\n                    White Color\r\n                    <input value={this.props.whiteColor} type=\"color\" onChange={(e) => {this.props.handleOtherChange(e.target.value,'whiteColor')}}></input>\r\n                    </label>\r\n                    <label htmlFor=\"blackColor\">\r\n                    Black color\r\n                    <input value={this.props.blackColor} type=\"color\" onChange={(e) => {this.props.handleOtherChange(e.target.value,'blackColor')}}></input>\r\n                    </label>\r\n                    <label className=\"full\">\r\n                    Dark mode?\r\n                    <label className=\"switch\">\r\n                        <input type=\"checkbox\" defaultChecked={this.props.darkMode} onChange={(e) => {this.props.handleOtherChange(e.target.checked,'darkMode')}} />\r\n                        <span className=\"slider round\"></span>\r\n                    </label>\r\n                    </label>\r\n                    <label className=\"full\">\r\n                    Highlight Last move?\r\n                    <label className=\"switch\">\r\n                        <input type=\"checkbox\" defaultChecked={this.props.highlightLastMove} onChange={(e) => {this.props.handleOtherChange(e.target.checked,'highlightLastMove')}} />\r\n                        <span className=\"slider round\"></span>\r\n                    </label>\r\n                    </label>\r\n                </div>\r\n                <div>\r\n                    <button className=\"saveButton\" onClick={this.saveToServer}>\r\n                        Save design!\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    saveToServer = () => {\r\n        const pgn = this.props.chess.pgn();\r\n        const whiteColor = this.props.whiteColor;\r\n        const blackColor = this.props.blackColor;\r\n        const darkMode = this.props.darkMode ? 1 : 0;\r\n        const highlightLastMove = this.props.highlightLastMove ? 1 : 0;\r\n    \r\n        let body = {\r\n          pgn: pgn,\r\n          whiteColor: whiteColor,\r\n          blackColor: blackColor,\r\n          darkMode: darkMode,\r\n          highlightLastMove: highlightLastMove\r\n        }\r\n    \r\n        const url = `http://localhost:8000/`;\r\n    \r\n        const req = new XMLHttpRequest();\r\n    \r\n        req.open('POST',url,true);\r\n        req.setRequestHeader('Content-Type', 'application/json');\r\n    \r\n        req.onload = () => {\r\n          if(req.readyState === 4) {\r\n            if(req.status === 200) {\r\n              let response = JSON.parse(req.response)\r\n              console.log(response);\r\n              this.props.handleOtherChange(response.id,'fetchedID');\r\n            } else {\r\n              console.warn(`There be errors about here`);\r\n            }\r\n          }\r\n        }\r\n\r\n        req.send(JSON.stringify(body));\r\n    }\r\n}\r\n \r\nexport default Controls;","import React, { Component } from 'react';\r\n\r\nclass Messages extends Component {\r\n    state = {  }\r\n    render() { \r\n        return (\r\n        <div className=\"messageContainer\">\r\n            {!this.props.fetchedID && (\r\n                <div className=\"message warn\">\r\n                <span className=\"material-icons\">warning</span>\r\n                <p>\r\n                    Once you press save, you'll be given a unique URL and won't be able to change your design. <strong>Copy your URL before closing the page!</strong>\r\n                </p>\r\n                </div>\r\n            )}\r\n            {this.props.fetchedID && (\r\n                <div className=\"message success\">\r\n                    <p>\r\n                    https://nf6.io/{this.props.fetchedID}\r\n                    <button onClick={this.copyToClipboard}>\r\n                        <span className=\"material-icons\">content_copy</span>\r\n                    </button>\r\n                    </p>  \r\n                </div>\r\n            )}\r\n        </div>\r\n        );\r\n    }\r\n\r\n    copyToClipboard = () => {\r\n        if(window.navigator.clipboard){\r\n            const baseurl = \"https://nf6.io/\";\r\n            const url = (baseurl+this.props.fetchedID);\r\n            window.navigator.clipboard.writeText(url).then(() => {\r\n                console.log(`Wrote to clipboard: ${url}`);\r\n            });\r\n        }\r\n    }\r\n}\r\n \r\nexport default Messages;","import React, { Component } from 'react';\nimport './App.css';\nimport Chess from 'chess.js';\nimport Controls from './components/controls';\nimport Messages from './components/messages';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass App extends Component {\n  state = {\n    darkMode: false,\n    whiteColor: \"#81ebfd\",\n    blackColor: \"#d24b4b\",\n    highlightLastMove: true\n\n  }\n\n  render() { \n    return (\n      \n      <div className=\"wrapper\">\n        <h1></h1>\n        <p id=\"date\"></p>\n        <canvas width=\"560\" height=\"560\"\n          style={{\n            transform: this.state.flipped ? \"rotate(180deg)\" : \"\"\n          }}\n        ></canvas>\n        <p id=\"pgn\"></p>\n        {!this.state.fetchedGame &&\n        <Controls\n          chess={this.chess}\n          handlePGN={this.handlePGN}\n          handleOtherChange={this.handleOtherChange}\n          fetchedID={this.state.fetchedID}\n          whiteColor={this.state.whiteColor}\n          blackColor={this.state.blackColor}\n          darkMode={this.state.darkMode}\n          highlightLastMove={this.state.highlightLastMove}\n        />}\n        {!this.state.fetchedGame && (\n          <Messages\n            fetchedID={this.state.fetchedID}\n          />\n        )}\n        <ToastContainer />\n      </div>\n    );\n  }\n\n  chess = new Chess();\n\n  files = {\n    a:0,\n    b:1,\n    c:2,\n    d:3,\n    e:4,\n    f:5,\n    g:6,\n    h:7\n}\n\nsquareColors = {\n  normal: {\n    darkSquare: \"#888\",\n    lightSquare: \"#eee\"\n  },\n  dark: {\n    darkSquare: \"#000\",\n    lightSquare: \"#4a4a4a\"\n  }\n}\n\n  componentDidMount = () => {\n    this.canvas = document.querySelector('canvas');\n    this.ctx = this.canvas.getContext('2d');\n\n    this.square = this.canvas.width/8;\n    this.ctx.lineWidth = this.square*0.065;\n    this.ctx.lineCap = \"round\";\n\n    this.fillBoard();\n\n    document.chess = this.chess;\n\n    const path = window.location.pathname.slice(1);\n    if(path) {\n      this.fetchFromServer(path);\n    }\n\n  }\n\n  fetchFromServer = (path) => {\n    fetch('http://localhost:8000/game/'+path)\n    .then(res => {\n        return res.json();\n    })\n    .then(json => {\n        this.setState({\n        fetchedGame: json,\n        blackColor: json.blackColor,\n        whiteColor: json.whiteColor,\n        pgn: json.pgn,\n        darkMode: json.darkMode,\n        highlightLastMove: json.highlightLastMove\n        }, () => {\n        this.chess.load_pgn(this.state.pgn);\n        this.updateBoard();\n        });\n    })\n    .catch(err => {\n      this.error(\"Couldn't find a game with that ID!\");\n    });\n  }\n\n\n  fillBoard = () => {\n    let rank = 1;\n    while(rank < 9) {\n        let file = 0;\n        while(file < 8) {\n            if(rank % 2 !== 0) {\n                if(file % 2 === 0) {\n                    this.ctx.fillStyle = this.state.darkMode ? this.squareColors.dark.darkSquare : this.squareColors.normal.darkSquare;\n                    this.ctx.fillRect(file*this.square,this.canvas.height-(this.square*rank),this.square,this.square);\n                } else {\n                    this.ctx.fillStyle = this.state.darkMode ? this.squareColors.dark.lightSquare : this.squareColors.normal.lightSquare;\n                    this.ctx.fillRect(file*this.square,this.canvas.height-(this.square*rank),this.square,this.square);\n                }\n            } else {\n                if(file % 2 !== 0) {\n                    this.ctx.fillStyle = this.state.darkMode ? this.squareColors.dark.darkSquare : this.squareColors.normal.darkSquare;\n                    this.ctx.fillRect(file*this.square,this.canvas.height-(this.square*rank),this.square,this.square);\n                } else {\n                    this.ctx.fillStyle = this.state.darkMode ? this.squareColors.dark.lightSquare : this.squareColors.normal.lightSquare;\n                    this.ctx.fillRect(file*this.square,this.canvas.height-(this.square*rank),this.square,this.square);\n                }\n            }\n            file++;\n        }\n        rank++;\n    }\n}\n\ndrawPath = (from,to,color) => {\n\n  this.ctx.beginPath();\n\n  this.ctx.strokeStyle = (color === 'w' ? this.state.whiteColor : this.state.blackColor);\n  this.ctx.moveTo(from.x,from.y);\n  this.ctx.lineTo(to.x,to.y);\n  this.ctx.stroke();\n}\n\nupdateBoard = () => {\n  this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n  this.fillBoard();\n  \n  const history = this.chess.history({verbose:true});\n\n  let moves = [];\n\n  history.forEach(move => {\n    let fromTo = {\n        from: move.from,\n        to: move.to,\n        color: move.color\n    }\n    let addTo = [];\n    addTo.push(fromTo);\n\n    moves = moves.concat(addTo);\n\n  });\n\n  moves.forEach((move,i) => {\n      let from = move.from;\n      let to = move.to;\n      \n      let fromFile = from[0];\n      let fromRank = parseInt(from[1])-1;\n      let fromFileNum = this.files[fromFile];\n      \n      let fromCoords = {\n          x: (this.square/2)+(this.square*fromFileNum),\n          y: this.canvas.height-this.square/2 - (this.square*fromRank)\n      }\n\n      let toFile = to[0];\n      let toRank = parseInt(to[1])-1;\n      let toFileNum = this.files[toFile];\n\n      let toCoords = {\n          x: (this.square/2)+(this.square*toFileNum),\n          y: this.canvas.height-(this.square/2) - (this.square*toRank)\n      };\n      \n      this.drawPath(fromCoords,toCoords,move.color);\n\n      if(i === moves.length-1 && this.state.highlightLastMove) {\n        this.ctx.beginPath();\n        this.ctx.arc(toCoords.x,toCoords.y,this.square/8,0,2*Math.PI);\n        this.ctx.stroke();\n      }\n  });\n  \n\n  let h1 = document.querySelector('h1');\n  let header = this.chess.header();\n\n  let pgn = \"\";\n  (this.chess.history()).forEach((t,i) => {\n      if(i % 2 === 0) {\n          pgn += (\"<b>\" + (Math.ceil(i/2)+1) + \".</b>&nbsp;\");\n      }\n  \n      pgn += t + \" \";\n  });\n  pgn.trim();\n\n  const pgnPlace = document.querySelector('#pgn');\n  pgnPlace.innerHTML = pgn;\n\n  if(header.White && header.Black) {\n      h1.innerHTML = `${header.White} vs ${header.Black}${header.Result ? \" <span class='score'>\" + header.Result + \"</span>\": \"\"}`;\n\n      if(header.Date) {\n          let date = document.querySelector('#date');\n          date.innerText = `${header.Date}`;\n      }\n  }\n}\n\nhandlePGN = (value) => {\n    const res = this.chess.load_pgn(value);\n\n    if(res) {\n      this.setState({\n        pgn: value\n      }, () => {\n        this.updateBoard();\n      });\n    }\n  }\n\n  handleOtherChange = (value,target,callback=null) => {\n    this.setState({\n      [target]: value\n    }, () => {\n      if(callback) {\n        callback();\n      }\n      this.updateBoard();\n    });\n  }\n\n  error = (message) => {\n    toast.error(message, {\n      position: \"bottom-center\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n    });\n  }\n}\n \nexport default App;\n\n/** The Reacty Way\n * Accept PGN input and load it into this.chess, then this.state.pgn to value\n * In callback, call this.drawLines(), which should operate agnostic to input so you can call it whenever ANYTHING changes (colors or PGN).\n * \n * Sample \n */","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals"],"sourceRoot":""}