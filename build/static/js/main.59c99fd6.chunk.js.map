{"version":3,"sources":["components/controls.jsx","components/messages.jsx","App.js","index.js","resources/generator.js"],"names":["Controls","state","saveToServer","document","querySelector","disabled","body","pgn","props","chess","whiteColor","blackColor","darkMode","highlightLastMove","req","XMLHttpRequest","open","setRequestHeader","onload","readyState","status","response","JSON","parse","console","log","handleOtherChange","id","warn","send","stringify","className","cols","rows","placeholder","onChange","e","handlePGN","target","value","htmlFor","this","type","defaultChecked","checked","onClick","Component","Messages","copyToClipboard","window","navigator","clipboard","url","fetchedID","writeText","then","App","Chess","files","a","b","c","d","f","g","h","squareColors","normal","darkSquare","lightSquare","dark","componentDidMount","canvas","ctx","getContext","square","width","lineWidth","lineCap","generator","fillBoard","path","location","pathname","slice","setState","fetchingGame","fetchFromServer","fetch","res","json","err","error","load_pgn","headers","header","fetchedGame","white","White","black","Black","result","Result","updateBoard","catch","callback","message","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","height","style","transform","flipped","history","map","elem","i","Math","ceil","ReactDOM","render","StrictMode","getElementById","rank","file","fillStyle","fillRect","drawPath","from","to","color","beginPath","strokeStyle","moveTo","x","y","lineTo","stroke","module","exports","clearRect","verbose","moves","forEach","move","fromTo","addTo","push","concat","fromFile","fromRank","parseInt","fromFileNum","fromCoords","toFile","toRank","toFileNum","toCoords","length","arc","PI"],"mappings":"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","file":"static/js/main.59c99fd6.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass Controls extends Component {\r\n    state = {  }\r\n    render() { \r\n        return (\r\n            <div className=\"controls\">\r\n                <textarea id=\"importGame\" cols=\"30\" rows=\"10\" placeholder=\"Input PGN\"\r\n                            onChange={(e) => {this.props.handlePGN(e.target.value)}}\r\n                        ></textarea>\r\n                <div className=\"row\">\r\n                    <label htmlFor=\"whiteColor\">\r\n                    White Color\r\n                    <input value={this.props.whiteColor} type=\"color\" onChange={(e) => {this.props.handleOtherChange(e.target.value,'whiteColor')}}></input>\r\n                    </label>\r\n                    <label htmlFor=\"blackColor\">\r\n                    Black color\r\n                    <input value={this.props.blackColor} type=\"color\" onChange={(e) => {this.props.handleOtherChange(e.target.value,'blackColor')}}></input>\r\n                    </label>\r\n                    <label className=\"full\">\r\n                    Dark mode?\r\n                    <label className=\"switch\">\r\n                        <input type=\"checkbox\" defaultChecked={this.props.darkMode} onChange={(e) => {this.props.handleOtherChange(e.target.checked,'darkMode')}} />\r\n                        <span className=\"slider round\"></span>\r\n                    </label>\r\n                    </label>\r\n                    <label className=\"full\">\r\n                    Highlight Last move?\r\n                    <label className=\"switch\">\r\n                        <input type=\"checkbox\" defaultChecked={this.props.highlightLastMove} onChange={(e) => {this.props.handleOtherChange(e.target.checked,'highlightLastMove')}} />\r\n                        <span className=\"slider round\"></span>\r\n                    </label>\r\n                    </label>\r\n                </div>\r\n                <div>\r\n                    <button className=\"saveButton\" onClick={this.saveToServer}>\r\n                        Save design!\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    saveToServer = () => {\r\n        let saveButton = document.querySelector('.saveButton');\r\n        saveButton.disabled = true;\r\n        const pgn = this.props.chess.pgn();\r\n        const whiteColor = this.props.whiteColor;\r\n        const blackColor = this.props.blackColor;\r\n        const darkMode = this.props.darkMode ? 1 : 0;\r\n        const highlightLastMove = this.props.highlightLastMove ? 1 : 0;\r\n    \r\n        let body = {\r\n          pgn: pgn,\r\n          whiteColor: whiteColor,\r\n          blackColor: blackColor,\r\n          darkMode: darkMode,\r\n          highlightLastMove: highlightLastMove\r\n        }\r\n        \r\n        const url = 'https://nf6.io/add';\r\n    \r\n        const req = new XMLHttpRequest();\r\n    \r\n        req.open('POST',url,true);\r\n        req.setRequestHeader('Content-Type', 'application/json');\r\n    \r\n        req.onload = () => {\r\n          if(req.readyState === 4) {\r\n            if(req.status === 200) {\r\n              let response = JSON.parse(req.response)\r\n              console.log(response);\r\n              this.props.handleOtherChange(response.id,'fetchedID');\r\n            } else {\r\n              console.warn(`There be errors about here`);\r\n            }\r\n          }\r\n        }\r\n\r\n        req.send(JSON.stringify(body));\r\n    }\r\n}\r\n \r\nexport default Controls;","import React, { Component } from 'react';\r\n\r\nclass Messages extends Component {\r\n    state = {  }\r\n    render() { \r\n        return (\r\n        <div className=\"messageContainer\">\r\n            {!this.props.fetchedID && (\r\n                <div className=\"message warn\">\r\n                <span className=\"material-icons\">warning</span>\r\n                <p>\r\n                    Once you press save, you'll be given a unique URL and won't be able to change your design. <strong>Copy your URL before closing the page!</strong>\r\n                </p>\r\n                </div>\r\n            )}\r\n            {this.props.fetchedID && (\r\n                <div className=\"message success\">\r\n                    <p>\r\n                    https://nf6.io/{this.props.fetchedID}\r\n                    <button onClick={this.copyToClipboard}>\r\n                        <span className=\"material-icons\">content_copy</span>\r\n                    </button>\r\n                    </p>  \r\n                </div>\r\n            )}\r\n        </div>\r\n        );\r\n    }\r\n\r\n    copyToClipboard = () => {\r\n        if(window.navigator.clipboard){\r\n            const baseurl = \"https://nf6.io/\";\r\n            const url = (baseurl+this.props.fetchedID);\r\n            window.navigator.clipboard.writeText(url).then(() => {\r\n                console.log(`Wrote to clipboard: ${url}`);\r\n            });\r\n        }\r\n    }\r\n}\r\n \r\nexport default Messages;","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport Chess from 'chess.js';\r\nimport Controls from './components/controls';\r\nimport Messages from './components/messages';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport generator from './resources/generator' ;\r\n\r\nclass App extends Component {\r\n  state = {\r\n    darkMode: false,\r\n    whiteColor: \"#81ebfd\",\r\n    blackColor: \"#d24b4b\",\r\n    highlightLastMove: true\r\n\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      \r\n      <div className=\"wrapper\">\r\n        {this.state.fetchedGame && this.state.white && this.state.black &&\r\n          <h1>\r\n            {this.state.white} vs {this.state.black}\r\n            {this.state.result && <span className='score'>{\" \" + this.state.result}</span>}\r\n          </h1>\r\n        }\r\n        <p id=\"date\"></p>\r\n        <canvas width=\"560\" height=\"560\"\r\n          style={{\r\n            transform: this.state.flipped ? \"rotate(180deg)\" : \"\"\r\n          }}\r\n        ></canvas>\r\n        \r\n        {this.state.fetchedGame &&\r\n        <p id=\"pgn\">{this.chess.history().map((elem,i) => {\r\n          if(i%2 === 0) {\r\n            return <><b>{Math.ceil(i/2)+1 + \". \"}</b><>{elem + \" \"}</></>;\r\n          } else {\r\n            return <>{elem + \" \"}</>;\r\n          }\r\n        })}</p>}\r\n\r\n        {(!this.state.fetchedGame && !this.state.fetchingGame) &&\r\n        <Controls\r\n          chess={this.chess}\r\n          handlePGN={this.handlePGN}\r\n          handleOtherChange={this.handleOtherChange}\r\n          fetchedID={this.state.fetchedID}\r\n          whiteColor={this.state.whiteColor}\r\n          blackColor={this.state.blackColor}\r\n          darkMode={this.state.darkMode}\r\n          highlightLastMove={this.state.highlightLastMove}\r\n        />}\r\n        {(!this.state.fetchedGame && !this.state.fetchingGame) && (\r\n          <Messages\r\n            fetchedID={this.state.fetchedID}\r\n          />\r\n        )}\r\n        <ToastContainer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  chess = new Chess();\r\n\r\n  files = {\r\n    a:0,\r\n    b:1,\r\n    c:2,\r\n    d:3,\r\n    e:4,\r\n    f:5,\r\n    g:6,\r\n    h:7\r\n}\r\n\r\nsquareColors = {\r\n  normal: {\r\n    darkSquare: \"#888\",\r\n    lightSquare: \"#eee\"\r\n  },\r\n  dark: {\r\n    darkSquare: \"#000\",\r\n    lightSquare: \"#4a4a4a\"\r\n  }\r\n}\r\n\r\n  componentDidMount = () => {\r\n    this.canvas = document.querySelector('canvas');\r\n    this.ctx = this.canvas.getContext('2d');\r\n\r\n    this.square = this.canvas.width/8;\r\n    this.ctx.lineWidth = this.square*0.065;\r\n    this.ctx.lineCap = \"round\";\r\n\r\n    generator.fillBoard(this.state.darkMode,this.ctx,this.canvas);\r\n\r\n    document.chess = this.chess;\r\n\r\n    const path = window.location.pathname.slice(1);\r\n    if(path) {\r\n      console.log('fetching');\r\n      this.setState({\r\n        fetchingGame: true\r\n      },() => {\r\n        this.fetchFromServer(path);\r\n      });\r\n    }\r\n\r\n  }\r\n//\r\n  fetchFromServer = (path) => {\r\n    fetch('https://nf6.io/game/'+path)\r\n    .then(res => res.json())\r\n    .then(json => {\r\n        if(json.err) {\r\n          return this.error(\"Couldn't find a game with that ID!\");\r\n        }\r\n        console.log(json);\r\n        this.chess.load_pgn(json.pgn);\r\n        let headers = this.chess.header();\r\n        this.setState({\r\n        fetchedGame: json,\r\n        blackColor: json.blackColor,\r\n        whiteColor: json.whiteColor,\r\n        pgn: json.pgn,\r\n        white: headers.White,\r\n        black: headers.Black,\r\n        result: headers.Result,\r\n        darkMode: json.darkMode,\r\n        highlightLastMove: json.highlightLastMove,\r\n        fetchingGame: false,\r\n        }, () => {\r\n          generator.updateBoard(this.ctx,this.chess,this.canvas,this.state.whiteColor,this.state.blackColor,this.state.darkMode,this.state.highlightLastMove);\r\n          console.log('fetched');\r\n        });\r\n    })\r\n    .catch(err => {\r\n      this.error(\"Couldn't find a game with that ID!\");\r\n    });\r\n  }\r\n\r\nhandlePGN = (value) => {\r\n    const res = this.chess.load_pgn(value);\r\n\r\n    if(res) {\r\n      this.setState({\r\n        pgn: value\r\n      }, () => {\r\n        generator.updateBoard(this.ctx,this.chess,this.canvas,this.state.whiteColor,this.state.blackColor,this.state.darkMode,this.state.highlightLastMove);\r\n      });\r\n    }\r\n  }\r\n\r\n  handleOtherChange = (value,target,callback=null) => {\r\n    this.setState({\r\n      [target]: value\r\n    }, () => {\r\n      if(callback) {\r\n        callback();\r\n      }\r\n      generator.updateBoard(this.ctx,this.chess,this.canvas,this.state.whiteColor,this.state.blackColor,this.state.darkMode,this.state.highlightLastMove);\r\n    });\r\n  }\r\n\r\n  error = (message) => {\r\n    toast.error(message, {\r\n      position: \"bottom-center\",\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    });\r\n  }\r\n}\r\n \r\nexport default App;\r\n\r\n/** The Reacty Way\r\n * Accept PGN input and load it into this.chess, then this.state.pgn to value\r\n * In callback, call this.drawLines(), which should operate agnostic to input so you can call it whenever ANYTHING changes (colors or PGN).\r\n * \r\n * Sample \r\n */","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals","const fillBoard = (darkMode,ctx,canvas) => {\r\n\r\n    const square = canvas.width/8;\r\n    ctx.lineWidth = square*0.065;\r\n    ctx.lineCap = \"round\";\r\n\r\n    let rank = 1;\r\n    while(rank < 9) {\r\n        let file = 0;\r\n        while(file < 8) {\r\n            if(rank % 2 !== 0) {\r\n                if(file % 2 === 0) {\r\n                    ctx.fillStyle = darkMode ? squareColors.dark.darkSquare : squareColors.normal.darkSquare;\r\n                    ctx.fillRect(file*square,canvas.width-(square*rank),square,square);\r\n                } else {\r\n                    ctx.fillStyle = darkMode ? squareColors.dark.lightSquare : squareColors.normal.lightSquare;\r\n                    ctx.fillRect(file*square,canvas.width-(square*rank),square,square);\r\n                }\r\n            } else {\r\n                if(file % 2 !== 0) {\r\n                    ctx.fillStyle = darkMode ? squareColors.dark.darkSquare : squareColors.normal.darkSquare;\r\n                    ctx.fillRect(file*square,canvas.width-(square*rank),square,square);\r\n                } else {\r\n                    ctx.fillStyle = darkMode ? squareColors.dark.lightSquare : squareColors.normal.lightSquare;\r\n                    ctx.fillRect(file*square,canvas.width-(square*rank),square,square);\r\n                }\r\n            }\r\n            file++;\r\n        }\r\n        rank++;\r\n    }\r\n}\r\n\r\nconst updateBoard = (ctx,chess,canvas,whiteColor,blackColor,darkMode,highlightLastMove) => {\r\n    ctx.clearRect(0,0,canvas.width,canvas.height);\r\n    fillBoard(darkMode,ctx,canvas);\r\n    \r\n    const history = chess.history({verbose:true});\r\n  \r\n    let moves = [];\r\n  \r\n    history.forEach(move => {\r\n      let fromTo = {\r\n          from: move.from,\r\n          to: move.to,\r\n          color: move.color\r\n      }\r\n      let addTo = [];\r\n      addTo.push(fromTo);\r\n  \r\n      moves = moves.concat(addTo);\r\n  \r\n    });\r\n    \r\n    const square = canvas.width/8;\r\n\r\n    moves.forEach((move,i) => {\r\n\r\n        let from = move.from;\r\n        let to = move.to;\r\n        \r\n        let fromFile = from[0];\r\n        let fromRank = parseInt(from[1])-1;\r\n        let fromFileNum = files[fromFile];\r\n        \r\n        let fromCoords = {\r\n            x: (square/2)+(square*fromFileNum),\r\n            y: canvas.width-square/2 - (square*fromRank)\r\n        }\r\n  \r\n        let toFile = to[0];\r\n        let toRank = parseInt(to[1])-1;\r\n        let toFileNum = files[toFile];\r\n  \r\n        let toCoords = {\r\n            x: (square/2)+(square*toFileNum),\r\n            y: canvas.width-(square/2) - (square*toRank)\r\n        };\r\n        \r\n        drawPath(ctx,whiteColor,blackColor,fromCoords,toCoords,move.color);\r\n  \r\n        if(i === moves.length-1 && highlightLastMove) {\r\n          ctx.beginPath();\r\n          ctx.arc(toCoords.x,toCoords.y,square/8,0,2*Math.PI);\r\n          ctx.stroke();\r\n        }\r\n    });\r\n    \r\n}\r\n\r\nconst drawPath = (ctx,whiteColor,blackColor,from,to,color) => {\r\n\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = (color === 'w' ? whiteColor : blackColor);\r\n    ctx.moveTo(from.x,from.y);\r\n    ctx.lineTo(to.x,to.y);\r\n    ctx.stroke();\r\n\r\n}\r\n\r\n\r\nconst files = {\r\n    a:0,\r\n    b:1,\r\n    c:2,\r\n    d:3,\r\n    e:4,\r\n    f:5,\r\n    g:6,\r\n    h:7\r\n}\r\n\r\nconst squareColors = {\r\n    normal: {\r\n      darkSquare: \"#888\",\r\n      lightSquare: \"#eee\"\r\n    },\r\n    dark: {\r\n      darkSquare: \"#000\",\r\n      lightSquare: \"#4a4a4a\"\r\n    }\r\n}\r\n\r\nmodule.exports.updateBoard = updateBoard;\r\nmodule.exports.fillBoard = fillBoard;"],"sourceRoot":""}